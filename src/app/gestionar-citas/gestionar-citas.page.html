<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Gestionar Citas</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container">
    <h1>Gestión de Citas</h1>

    <!-- Mostrar la lista de citas -->
    <div *ngIf="citas && citas.length > 0" class="citas-container">
      <div *ngFor="let cita of citas" (click)="abrirModal(cita)" class="cita-card">
        <ion-card>
          <ion-card-header>
            <ion-card-title>{{ cita.izena }} - {{ cita.data }}</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p>ID-a: {{ cita.hasiera_ordua }} - {{ cita.amaiera_ordua }}</p>
            <p>Eserlekua: {{ cita.eserlekua }}</p>
          </ion-card-content>
        </ion-card>
      </div>
    </div>

    <ion-modal [isOpen]="modalAbierto" (ionModalDidDismiss)="cerrarModal()">
      <ng-template>
        <ion-header>
          <ion-toolbar color="primary">
            <ion-title>Detalles de la Cita</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="cerrarModal()">Cerrar</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
    
        <ion-modal [isOpen]="modalAbierto" (ionModalDidDismiss)="cerrarModal()">
          <ng-template>
            <ion-header>
              <ion-toolbar color="primary">
                <ion-title>Detalles de la Cita</ion-title>
                <ion-buttons slot="end">
                  <ion-button (click)="cerrarModal()">Cerrar</ion-button>
                </ion-buttons>
              </ion-toolbar>
            </ion-header>
        
            <ion-content class="modal-content">
              <div class="modal-wrapper">
                <div class="modal-section">
                  <h2>Información Básica</h2>
                  <ion-item>
                    <ion-label position="stacked">ID</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.id"></ion-input>
                  </ion-item>
                  <ion-item>
                    <ion-label position="stacked">Nombre</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.izena"></ion-input>
                  </ion-item>
                  <ion-item>
                    <ion-label position="stacked">Teléfono</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.telefonoa"></ion-input>
                  </ion-item>
                </div>
        
                <div class="modal-section">
                  <h2>Detalles de la Cita</h2>
                  <ion-item>
                    <ion-label position="stacked">Fecha</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.data"></ion-input>
                  </ion-item>
                  <ion-item>
                    <ion-label position="stacked">Hora de Inicio</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.hasiera_ordua"></ion-input>
                  </ion-item>
                  <ion-item>
                    <ion-label position="stacked">Hora de Fin</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.amaiera_ordua"></ion-input>
                  </ion-item>
                </div>
        
                <div class="modal-section">
                  <h2>Ubicación y Costos</h2>
                  <ion-item>
                    <ion-label position="stacked">Eserlekua</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.eserlekua"></ion-input>
                  </ion-item>
                  <ion-item>
                    <ion-label position="stacked">Precio Total</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.prezio_totala"></ion-input>
                  </ion-item>
                </div>
        
                <div class="modal-section">
                  <h2>Notas Adicionales</h2>
                  <ion-item>
                    <ion-label position="stacked">Descripción</ion-label>
                    <ion-textarea [(ngModel)]="citaSeleccionada.deskribapena"></ion-textarea>
                  </ion-item>
                  <ion-item>
                    <ion-label position="stacked">Etxekoa</ion-label>
                    <ion-input [(ngModel)]="citaSeleccionada.etxekoa"></ion-input>
                  </ion-item>
                </div>
              </div>
            </ion-content>
        
            <ion-footer>
              <div class="modal-footer">
                <ion-button class="confirmar-button" (click)="confirmarCambios()">Confirmar</ion-button>
                <ion-button class="cancelar-button" (click)="cancelarCambios()">Cancelar</ion-button>
              </div>
            </ion-footer>
          </ng-template>
        </ion-modal>
    